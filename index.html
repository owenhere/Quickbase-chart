<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quickbase User List</title>
</head>
<body>
    <h1>Quickbase User List</h1>
    <ul id="userList"></ul>

    <script>
      let isEmail = 0, email;
      for (let i = 0; i < localStorage.length; i++) {
        let key = localStorage.key(i); // Get the key
        let value = localStorage.getItem(key); // Get the value

        // Convert value to string if it's not null or undefined
        if (value !== null && value !== undefined) {
          const str = String(value); // Convert and set back to localStorage
          if(str.includes('signedInAs')) {
            const data = JSON.parse(str);
            const temp = Object.keys(data);
            for(let i = 0; i < temp.length; i++){
              if(temp[i].includes('ReportMetadataPayload')) {
                email = data[temp[i]].signedInAs
                isEmail = 1;
                break;
              }
            }
          }
        }
        if(isEmail === 1) break;
      }
    </script>
</body>
</html>
